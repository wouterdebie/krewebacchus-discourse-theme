/* Krewebacchus Discourse Theme
 * Cyberpunk/sci-fi styling to match the main webapp
 * Dark mode is default - matches krewebacchus.org
 */

/* ==================== 
   Custom Fonts
   ==================== */
@font-face {
  font-family: "Starjedi";
  src: url("https://krewebacchus.org/fonts/Starjedi.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "VideoPhreak";
  src: url("https://krewebacchus.org/fonts/VideoPhreak.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* ==================== 
   CSS Variables - Dark Mode (default)
   Override ALL Discourse CSS custom properties
   ==================== */
:root {
  /* Krewebacchus brand colors */
  --krew-primary: #39FF14;
  --krew-primary-hover: #65FF3C;
  --krew-primary-glow: rgba(57, 255, 20, 0.3);
  --krew-surface-darkest: #0A1018;
  --krew-surface-dark: #121B29;
  --krew-surface-mid: #1a2636;
  --krew-surface-light: #253344;
  --krew-text: #F8FAFF;
  --krew-text-muted: #8A9BAD;
  
  /* Typography */
  --krew-font-mono: "Courier New", Courier, monospace;
  
  /* Accent Colors */
  --krew-danger: #FF3E5E;
  --krew-warning: #FFB114;
  --krew-info: #14CFFF;
  --krew-success: #14FF83;
  
  /* Override Discourse's CSS properties */
  --primary: #F8FAFF !important;
  --primary-rgb: 248, 250, 255 !important;
  --secondary: #0A1018 !important;
  --secondary-rgb: 10, 16, 24 !important;
  --tertiary: #39FF14 !important;
  --tertiary-rgb: 57, 255, 20 !important;
  --quaternary: #8A9BAD !important;
  --header_background: #121B29 !important;
  --header_primary: #F8FAFF !important;
  --highlight: rgba(57, 255, 20, 0.15) !important;
  --highlight-bg: rgba(57, 255, 20, 0.1) !important;
  --success: #39FF14 !important;
  --love: #39FF14 !important;
  --danger: #FF3E5E !important;
  --warning: #FFB114 !important;
  
  /* Primary shades */
  --primary-low: rgba(248, 250, 255, 0.1) !important;
  --primary-low-rgb: 248, 250, 255 !important;
  --primary-low-mid: rgba(248, 250, 255, 0.2) !important;
  --primary-medium: rgba(248, 250, 255, 0.4) !important;
  --primary-high: rgba(248, 250, 255, 0.75) !important;
  --primary-very-high: rgba(248, 250, 255, 0.85) !important;
  --primary-50: rgba(248, 250, 255, 0.05) !important;
  --primary-100: rgba(248, 250, 255, 0.1) !important;
  --primary-200: rgba(248, 250, 255, 0.2) !important;
  --primary-300: rgba(248, 250, 255, 0.3) !important;
  --primary-400: rgba(248, 250, 255, 0.4) !important;
  --primary-500: rgba(248, 250, 255, 0.5) !important;
  --primary-600: rgba(248, 250, 255, 0.6) !important;
  --primary-700: rgba(248, 250, 255, 0.7) !important;
  --primary-800: rgba(248, 250, 255, 0.8) !important;
  --primary-900: rgba(248, 250, 255, 0.9) !important;
  
  /* Secondary shades (backgrounds) */
  --secondary-low: #1a2636 !important;
  --secondary-medium: #253344 !important;
  --secondary-high: #344455 !important;
  --secondary-very-high: #445566 !important;
  --secondary-50: #0c1219 !important;
  --secondary-100: #0e1520 !important;
  --secondary-200: #121B29 !important;
  --secondary-300: #1a2636 !important;
  --secondary-400: #253344 !important;
  --secondary-500: #344455 !important;
  --secondary-600: #445566 !important;
  --secondary-700: #556677 !important;
  --secondary-800: #667788 !important;
  --secondary-900: #778899 !important;
  
  /* Tertiary shades (green accent) */
  --tertiary-low: rgba(57, 255, 20, 0.1) !important;
  --tertiary-medium: rgba(57, 255, 20, 0.4) !important;
  --tertiary-high: rgba(57, 255, 20, 0.75) !important;
  --tertiary-hover: #65FF3C !important;
  
  /* Effects */
  --krew-glow: 0 0 10px var(--krew-primary-glow);
  --krew-glow-strong: 0 0 15px var(--krew-primary-glow), 0 0 30px rgba(57, 255, 20, 0.15);
  --krew-border: 1px solid rgba(57, 255, 20, 0.3);
  --krew-border-radius: 0 8px 0 8px;
}

/* ==================== 
   Force Dark Backgrounds Everywhere
   ==================== */
html {
  background: var(--krew-surface-darkest) !important;
}

body {
  background-color: var(--krew-surface-darkest) !important;
  color: var(--krew-text) !important;
  font-family: var(--krew-font-mono);
  font-weight: 500;
}

/* Force backgrounds on all major content areas */
#main-outlet,
.wrap,
.full-width,
.container,
.contents,
.d-body,
.ember-application,
.topic-body,
.topic-area,
.topic-list,
.list-container,
.topic-list-container,
.topic-post,
.post-stream,
.cooked,
main,
nav,
aside,
section,
article,
.user-content-wrapper,
.user-main,
.user-preferences,
.admin-contents,
.show-more {
  background-color: var(--krew-surface-darkest) !important;
}

/* Table rows must be dark */
.topic-list-item,
.topic-list-item td,
.topic-list tbody tr,
table.topic-list tbody tr,
.latest-topic-list-item,
.category-list-item,
tr {
  background-color: var(--krew-surface-darkest) !important;
}

/* Transparent elements - avoid double backgrounds */
.full-width,
.contents,
.topic-list,
.category-list {
  background-color: transparent !important;
}

/* ==================== 
   Typography
   ==================== */

/* Headings use Starjedi (Star Wars style) */
h1, h2, h3,
.topic-title,
.fancy-title,
.title-wrapper .topic-link {
  font-family: "Starjedi", sans-serif;
  font-weight: 500;
  text-transform: lowercase;
  letter-spacing: 0.05em;
  color: var(--krew-text) !important;
}

/* Category/section headers use VideoPhreak */
.category-name,
.sidebar-section-header-text,
.badge-category__name {
  font-family: "VideoPhreak", sans-serif;
  letter-spacing: 0.1em;
}

/* ==================== 
   Header
   ==================== */
.d-header-wrap,
.d-header {
  background: var(--krew-surface-dark) !important;
  border-bottom: 2px solid var(--krew-primary) !important;
  box-shadow: var(--krew-glow);
}

/* Logo glow effect */
.d-header .logo-big,
.d-header .logo-small {
  filter: drop-shadow(0 0 8px var(--krew-primary-glow));
}

/* Header icons */
.d-header-icons .icon {
  color: var(--krew-primary) !important;
  transition: all 0.3s ease;
}

.d-header-icons .icon:hover {
  color: var(--krew-primary-hover) !important;
  filter: drop-shadow(0 0 8px var(--krew-primary-glow));
}

/* ==================== 
   Links
   ==================== */
a,
.title a,
.topic-list .main-link a.title,
.topic-list-item .title,
.sidebar-section-link-wrapper a,
.nav-pills > li > a {
  color: var(--krew-primary) !important;
  transition: all 0.2s ease;
}

a:hover,
.topic-list-item .title:hover {
  color: var(--krew-primary-hover) !important;
}

/* Muted/secondary links */
.topic-list .link-bottom-line a,
.link-bottom-line a {
  color: var(--krew-text-muted) !important;
}

/* ==================== 
   Navigation & Sidebar
   ==================== */
.sidebar-wrapper,
.sidebar-container,
.sidebar-sections,
.sidebar-section,
.sidebar-section-wrapper,
.sidebar-section-content,
nav.sidebar {
  background-color: var(--krew-surface-darkest) !important;
  border-right: var(--krew-border);
}

.sidebar-section-header-wrapper {
  color: var(--krew-primary) !important;
  font-family: var(--krew-font-mono);
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
}

.sidebar-section-link {
  border-radius: var(--krew-border-radius);
  transition: all 0.2s ease;
  color: var(--krew-text) !important;
}

.sidebar-section-link:hover,
.sidebar-section-link.active {
  background-color: var(--krew-surface-mid) !important;
  box-shadow: inset 0 0 10px var(--krew-primary-glow);
}

.sidebar-section-link.active {
  border-left: 2px solid var(--krew-primary);
}

/* ==================== 
   Topic List
   ==================== */
.topic-list th,
.topic-list-header {
  color: var(--krew-primary) !important;
  font-family: var(--krew-font-mono);
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  border-bottom: var(--krew-border) !important;
  background: transparent !important;
}

.topic-list-item {
  border-bottom: 1px solid var(--krew-surface-mid) !important;
  transition: all 0.2s ease;
}

.topic-list-item:hover {
  background-color: var(--krew-surface-mid) !important;
  box-shadow: var(--krew-glow);
}

/* Pinned topics */
.topic-list-item.pinned .title::before {
  color: var(--krew-warning) !important;
}

/* ==================== 
   Topic View
   ==================== */
.topic-body {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
}

.topic-post {
  border-bottom: 1px solid var(--krew-surface-mid);
}

/* Post content */
.cooked {
  color: var(--krew-text) !important;
}

.cooked a {
  color: var(--krew-info) !important;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all 0.2s ease;
}

.cooked a:hover {
  color: var(--krew-primary) !important;
  border-bottom-color: var(--krew-primary);
}

/* Code blocks */
.cooked pre,
.cooked code {
  background-color: var(--krew-surface-mid) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
  font-family: var(--krew-font-mono);
}

.cooked pre code {
  color: var(--krew-primary) !important;
}

/* Blockquotes */
.cooked blockquote {
  background-color: rgba(20, 207, 255, 0.1) !important;
  border-left: 3px solid var(--krew-info) !important;
  padding-left: 1rem;
}

/* ==================== 
   Buttons
   ==================== */
.btn-primary,
.btn.btn-primary {
  background: var(--krew-primary) !important;
  border: none !important;
  color: var(--krew-surface-darkest) !important;
  font-weight: 600;
  border-radius: var(--krew-border-radius);
  transition: all 0.3s ease;
  text-shadow: none !important;
}

.btn-primary:hover,
.btn.btn-primary:hover {
  background: var(--krew-primary-hover) !important;
  box-shadow: var(--krew-glow-strong);
  transform: translateY(-1px);
}

.btn-default,
.btn.btn-default,
.btn {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border) !important;
  color: var(--krew-text) !important;
  border-radius: var(--krew-border-radius);
  transition: all 0.2s ease;
}

.btn-default:hover,
.btn.btn-default:hover,
.btn:hover {
  background-color: var(--krew-surface-mid) !important;
  box-shadow: var(--krew-glow);
}

.btn-danger,
.btn.btn-danger {
  background-color: var(--krew-danger) !important;
  border: none !important;
  color: white !important;
  border-radius: var(--krew-border-radius);
}

/* ==================== 
   Forms & Inputs
   ==================== */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea,
select,
.select-kit .select-kit-header,
.search-input,
.search-container .search-input {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border) !important;
  border-radius: var(--krew-border-radius);
  color: var(--krew-text) !important;
  transition: all 0.2s ease;
}

input:focus,
textarea:focus,
select:focus,
.select-kit.is-expanded .select-kit-header {
  border-color: var(--krew-primary) !important;
  outline: none;
  box-shadow: var(--krew-glow);
}

/* ==================== 
   Categories
   ==================== */
.category-list-item {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
  margin-bottom: 0.5rem;
  transition: all 0.2s ease;
}

.category-list-item:hover {
  border-color: var(--krew-primary);
  box-shadow: var(--krew-glow);
}

/* Category badges */
.badge-category__wrapper {
  font-family: var(--krew-font-mono);
}

/* ==================== 
   User Cards & Profiles
   ==================== */
.user-card,
.user-card-large {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
  box-shadow: var(--krew-glow);
}

.user-card h1,
.user-card h2 {
  color: var(--krew-primary) !important;
}

/* Avatar glow for admins/captains */
.user-card.admin .avatar-flair,
.user-card.moderator .avatar-flair {
  box-shadow: var(--krew-glow-strong);
}

/* ==================== 
   Notifications & Badges
   ==================== */
.badge-notification {
  background-color: var(--krew-primary) !important;
  color: var(--krew-surface-darkest) !important;
  font-weight: 600;
}

.badge-notification.unread-posts,
.badge-notification.new-posts {
  background-color: var(--krew-info) !important;
}

/* User badges */
.user-badge {
  background-color: var(--krew-surface-mid) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
}

/* ==================== 
   Modals & Popups
   ==================== */
.modal-inner-container,
.d-modal__container {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
  border-radius: 8px;
  box-shadow: var(--krew-glow-strong);
}

.modal-header,
.d-modal__header {
  border-bottom: var(--krew-border);
}

.modal-header h3,
.d-modal__title {
  color: var(--krew-primary) !important;
  font-family: var(--krew-font-mono);
}

/* ==================== 
   Chat
   ==================== */
.chat-channel {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
}

.chat-message {
  border-bottom: 1px solid var(--krew-surface-mid);
}

.chat-message:hover {
  background-color: var(--krew-surface-mid) !important;
}

.chat-composer-input {
  background-color: var(--krew-surface-mid) !important;
  border: var(--krew-border);
}

/* ==================== 
   Loading & Animations
   ==================== */
.spinner {
  border-color: var(--krew-primary) !important;
  border-right-color: transparent !important;
}

/* Page loading bar */
#discourse-loading-spinner {
  background-color: var(--krew-primary) !important;
  box-shadow: var(--krew-glow-strong);
}

/* Subtle scan line effect for sci-fi feel */
@keyframes scanline {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100vh);
  }
}

body::after {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--krew-primary-glow), transparent);
  pointer-events: none;
  animation: scanline 6s linear infinite;
  opacity: 0.3;
  z-index: 9999;
}

/* ==================== 
   Scrollbars
   ==================== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--krew-surface-darkest);
}

::-webkit-scrollbar-thumb {
  background: var(--krew-surface-mid);
  border: 1px solid rgba(57, 255, 20, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--krew-primary);
  border-color: var(--krew-primary);
}

/* ==================== 
   Groups (SubKrewes)
   ==================== */
.group-box {
  background-color: var(--krew-surface-dark) !important;
  border: var(--krew-border);
  border-radius: var(--krew-border-radius);
}

.group-box:hover {
  border-color: var(--krew-primary);
  box-shadow: var(--krew-glow);
}

/* ==================== 
   Footer
   ==================== */
.custom-footer,
footer,
.powered-by-discourse {
  background-color: transparent !important;
  border-top: var(--krew-border);
  color: var(--krew-text-muted) !important;
}

.powered-by-discourse a {
  color: var(--krew-text-muted) !important;
}

/* ==================== 
   Welcome banner
   ==================== */
.welcome-banner,
.welcome-banner__header {
  background: transparent !important;
  color: var(--krew-text) !important;
}

.welcome-banner__title {
  color: var(--krew-text) !important;
}

/* ==================== 
   Text colors
   ==================== */
.topic-excerpt,
.category-description {
  color: var(--krew-text-muted) !important;
}

/* Numbers/stats */
.topic-list .num,
td.num,
.views,
.posts {
  color: var(--krew-text-muted) !important;
}

/* ==================== 
   Responsive Adjustments
   ==================== */
@media (max-width: 768px) {
  .topic-list-item {
    border-radius: 4px;
  }
  
  /* Disable scanline on mobile for performance */
  body::after {
    display: none;
  }
}
