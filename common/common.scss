/* Krewebacchus Discourse Theme
 * Cyberpunk/sci-fi styling to match the main webapp
 * Fully scheme-agnostic - uses Discourse's CSS variables which adapt per scheme
 */

/* ==================== 
   Custom Fonts
   ==================== */
@font-face {
  font-family: "Starjedi";
  src: url("https://krewebacchus.org/fonts/Starjedi.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "VideoPhreak";
  src: url("https://krewebacchus.org/fonts/VideoPhreak.woff2") format("woff2");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* ==================== 
   CSS Variables - Custom tints using color-mix()
   Discourse's auto-calculated --primary-low, --tertiary-low etc are broken (compute to blue)
   We create our own reliable tints here
   ==================== */
:root {
  /* Typography */
  --krew-font-mono: "Courier New", Courier, monospace;
  --krew-border-radius: 0 8px 0 8px;
  
  /* Custom tints - using color-mix for scheme-adaptive colors */
  /* 10% primary mixed with 90% secondary = subtle border/hover tint */
  --krew-tint-10: color-mix(in srgb, var(--primary) 10%, var(--secondary));
  /* 5% primary = very subtle background tint */
  --krew-tint-5: color-mix(in srgb, var(--primary) 5%, var(--secondary));
  /* 15% tertiary = subtle accent tint for hovers */
  --krew-accent-tint: color-mix(in srgb, var(--tertiary) 15%, var(--secondary));
}

/* ==================== 
   Base Styling
   Uses Discourse color scheme variables that auto-adapt
   ==================== */
html {
  background: var(--secondary) !important;
}

body {
  background-color: var(--secondary) !important;
  color: var(--primary) !important;
  font-family: var(--krew-font-mono);
  font-weight: 500;
}

/* Force backgrounds on major content areas */
#main-outlet,
.wrap,
.full-width,
.container,
.contents,
.d-body,
.ember-application,
.topic-body,
.topic-area,
.list-container,
.topic-list-container,
.topic-post,
.post-stream,
main,
nav,
aside,
section,
article,
.user-content-wrapper,
.user-main,
.user-preferences,
.admin-contents,
.show-more {
  background-color: var(--secondary) !important;
}

/* Table rows */
.topic-list-item,
.topic-list-item td,
.topic-list tbody tr,
table.topic-list tbody tr,
.latest-topic-list-item,
.category-list-item,
tr {
  background-color: var(--secondary) !important;
}

/* Transparent elements */
.full-width,
.contents,
.topic-list,
.category-list,
.cooked {
  background-color: transparent !important;
}

/* ==================== 
   Typography
   ==================== */

/* Headings use Starjedi (Star Wars style) */
h1, h2, h3,
.topic-title,
.fancy-title,
.title-wrapper .topic-link {
  font-family: "Starjedi", sans-serif;
  font-weight: 500;
  text-transform: lowercase;
  letter-spacing: 0.05em;
  color: var(--primary) !important;
}

/* Category/section headers use VideoPhreak */
.category-name,
.sidebar-section-header-text,
.badge-category__name {
  font-family: "VideoPhreak", sans-serif;
  letter-spacing: 0.1em;
}

/* ==================== 
   Header
   ==================== */
.d-header-wrap,
.d-header {
  background: var(--header_background) !important;
  border-bottom: 2px solid var(--tertiary) !important;
}

/* Logo glow effect - subtle */
.d-header .logo-big,
.d-header .logo-small {
  filter: drop-shadow(0 0 4px var(--krew-tint-10));
}

/* Header icons */
.d-header-icons .icon {
  color: var(--tertiary) !important;
  transition: all 0.3s ease;
}

.d-header-icons .icon:hover {
  filter: brightness(1.2);
}

/* ==================== 
   Links
   ==================== */
a,
.title a,
.topic-list .main-link a.title,
.topic-list-item .title,
.sidebar-section-link-wrapper a,
.nav-pills > li > a {
  color: var(--tertiary) !important;
  transition: all 0.2s ease;
}

a:hover,
.topic-list-item .title:hover {
  filter: brightness(1.2);
}

/* Muted/secondary links */
.topic-list .link-bottom-line a,
.link-bottom-line a {
  color: var(--primary-medium) !important;
}

/* ==================== 
   Navigation & Sidebar
   ==================== */
.sidebar-wrapper,
.sidebar-container,
.sidebar-sections,
.sidebar-section,
.sidebar-section-wrapper,
.sidebar-section-content,
nav.sidebar {
  background-color: var(--secondary) !important;
  border-right: 1px solid var(--krew-tint-10);
}

.sidebar-section-header-wrapper {
  color: var(--tertiary) !important;
  font-family: var(--krew-font-mono);
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: 0.1em;
}

.sidebar-section-link {
  border-radius: var(--krew-border-radius);
  transition: all 0.2s ease;
  color: var(--primary) !important;
}

.sidebar-section-link:hover,
.sidebar-section-link.active {
  background-color: var(--krew-tint-5) !important;
  box-shadow: inset 0 0 10px var(--krew-tint-5);
}

.sidebar-section-link.active {
  border-left: 2px solid var(--tertiary);
}

/* ==================== 
   Topic List
   ==================== */
.topic-list th,
.topic-list-header {
  color: var(--tertiary) !important;
  font-family: var(--krew-font-mono);
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 0.1em;
  border-bottom: 1px solid var(--krew-tint-10) !important;
  background: transparent !important;
}

.topic-list-item {
  border-bottom: 1px solid var(--krew-tint-10) !important;
  transition: all 0.2s ease;
}

.topic-list-item:hover {
  background-color: var(--krew-tint-5) !important;
  box-shadow: 0 0 10px var(--krew-tint-5);
}

/* Pinned topics */
.topic-list-item.pinned .title::before {
  color: var(--warning) !important;
}

/* ==================== 
   Topic View
   ==================== */
.topic-body {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
}

.topic-post {
  border-bottom: 1px solid var(--krew-tint-10);
}

/* Post content */
.cooked {
  color: var(--primary) !important;
}

.cooked a {
  color: var(--quaternary) !important;
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: all 0.2s ease;
}

.cooked a:hover {
  color: var(--tertiary) !important;
  border-bottom-color: var(--tertiary);
}

/* Code blocks */
.cooked pre,
.cooked code {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
  font-family: var(--krew-font-mono);
}

.cooked pre code {
  color: var(--tertiary) !important;
}

/* Blockquotes */
.cooked blockquote {
  background-color: var(--quaternary-low) !important;
  border-left: 3px solid var(--quaternary) !important;
  padding-left: 1rem;
}

/* ==================== 
   Buttons - Primary (Green accent)
   Uses pseudo-element for scheme-adaptive tinted background
   ==================== */
.btn-primary,
.btn.btn-primary,
.btn.btn-primary.login-button {
  position: relative;
  background: transparent !important;
  border: 1px solid var(--tertiary) !important;
  color: var(--tertiary) !important;
  font-weight: 600;
  border-radius: var(--krew-border-radius);
  transition: all 0.3s ease;
  text-shadow: none !important;
  overflow: hidden;
  z-index: 1;
}

.btn-primary::before,
.btn.btn-primary::before,
.btn.btn-primary.login-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--tertiary);
  opacity: 0.15;
  z-index: -1;
  transition: opacity 0.3s ease;
}

.btn-primary:hover::before,
.btn.btn-primary:hover::before,
.btn.btn-primary.login-button:hover::before {
  opacity: 0.25;
}

.btn-primary:hover,
.btn.btn-primary:hover,
.btn.btn-primary.login-button:hover {
  box-shadow: 0 0 10px var(--krew-tint-10);
  transform: translateY(-1px);
}

/* ==================== 
   Buttons - Default
   ==================== */
.btn-default,
.btn.btn-default,
.btn {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10) !important;
  color: var(--primary) !important;
  border-radius: var(--krew-border-radius);
  transition: all 0.2s ease;
}

.btn-default:hover,
.btn.btn-default:hover,
.btn:hover {
  background-color: var(--krew-tint-5) !important;
  border-color: var(--krew-tint-10) !important;
}

.btn-danger,
.btn.btn-danger {
  background-color: var(--danger) !important;
  border: none !important;
  color: white !important;
  border-radius: var(--krew-border-radius);
}

/* ==================== 
   Forms & Inputs
   ==================== */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
textarea,
select,
.select-kit .select-kit-header,
.search-input,
.search-input--welcome-banner,
.search-container .search-input {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10) !important;
  border-radius: var(--krew-border-radius);
  color: var(--primary) !important;
  transition: all 0.2s ease;
}

input:focus,
textarea:focus,
select:focus,
.search-input:focus,
.search-input--welcome-banner:focus,
.select-kit.is-expanded .select-kit-header {
  border-color: var(--tertiary) !important;
  outline: none;
  box-shadow: 0 0 5px var(--krew-tint-10);
}

/* ==================== 
   Categories
   ==================== */
.category-list-item {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
  margin-bottom: 0.5rem;
  transition: all 0.2s ease;
}

.category-list-item:hover {
  border-color: var(--tertiary);
  box-shadow: 0 0 10px var(--krew-tint-10);
}

/* Category badges */
.badge-category__wrapper {
  font-family: var(--krew-font-mono);
}

/* ==================== 
   User Cards & Profiles
   ==================== */
.user-card,
.user-card-large {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
  box-shadow: 0 0 10px var(--krew-tint-10);
}

.user-card h1,
.user-card h2 {
  color: var(--tertiary) !important;
}

/* Avatar glow for admins/captains */
.user-card.admin .avatar-flair,
.user-card.moderator .avatar-flair {
  box-shadow: 0 0 15px var(--krew-tint-10), 0 0 30px var(--krew-tint-5);
}

/* ==================== 
   Notifications & Badges
   ==================== */
.badge-notification {
  background-color: var(--tertiary) !important;
  color: var(--secondary) !important;
  font-weight: 600;
}

.badge-notification.unread-posts,
.badge-notification.new-posts {
  background-color: var(--quaternary) !important;
}

/* User badges */
.user-badge {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
}

/* ==================== 
   Modals & Popups
   ==================== */
.modal-inner-container,
.d-modal__container {
  background-color: var(--secondary) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: 8px;
  box-shadow: 0 0 15px var(--krew-tint-10), 0 0 30px var(--krew-tint-5);
}

.modal-header,
.d-modal__header {
  border-bottom: 1px solid var(--krew-tint-10);
}

.modal-header h3,
.d-modal__title {
  color: var(--tertiary) !important;
  font-family: var(--krew-font-mono);
}

/* ==================== 
   Chat
   ==================== */
.chat-channel {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
}

.chat-message {
  border-bottom: 1px solid var(--krew-tint-10);
}

.chat-message:hover {
  background-color: var(--krew-tint-5) !important;
}

.chat-composer-input {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
}

/* ==================== 
   Loading & Animations
   ==================== */
.spinner {
  border-color: var(--tertiary) !important;
  border-right-color: transparent !important;
}

/* Page loading bar */
#discourse-loading-spinner {
  background-color: var(--tertiary) !important;
  box-shadow: 0 0 15px var(--krew-tint-10), 0 0 30px var(--krew-tint-5);
}

/* Subtle scan line effect for sci-fi feel */
@keyframes scanline {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100vh);
  }
}

/* ==================== 
   Scrollbars
   ==================== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--secondary);
}

::-webkit-scrollbar-thumb {
  background: var(--krew-tint-10);
  border: 1px solid var(--krew-tint-10);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--tertiary);
  border-color: var(--tertiary);
}

/* ==================== 
   Groups (SubKrewes)
   ==================== */
.group-box {
  background-color: var(--krew-tint-5) !important;
  border: 1px solid var(--krew-tint-10);
  border-radius: var(--krew-border-radius);
}

.group-box:hover {
  border-color: var(--tertiary);
  box-shadow: 0 0 10px var(--krew-tint-10);
}

/* ==================== 
   Footer
   ==================== */
.custom-footer,
footer,
.powered-by-discourse {
  background-color: transparent !important;
  border-top: 1px solid var(--krew-tint-10);
  color: var(--primary-medium) !important;
}

.powered-by-discourse a {
  color: var(--primary-medium) !important;
}

/* ==================== 
   Welcome banner
   ==================== */
.welcome-banner,
.welcome-banner__header {
  background: transparent !important;
  color: var(--primary) !important;
}

.welcome-banner__title {
  color: var(--primary) !important;
}

/* ==================== 
   Text colors
   ==================== */
.topic-excerpt,
.category-description {
  color: var(--primary-medium) !important;
}

/* Numbers/stats */
.topic-list .num,
td.num,
.views,
.posts {
  color: var(--primary-medium) !important;
}

/* ==================== 
   Responsive Adjustments
   ==================== */
@media (max-width: 768px) {
  .topic-list-item {
    border-radius: 4px;
  }
}
